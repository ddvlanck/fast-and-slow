(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46c3d8d2"],{2321:function(e,t,a){"use strict";var n=a("9ea7"),r=a.n(n);r.a},3816:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vl-layout",[a("vl-grid",{attrs:{"mod-stacked":""}},[a("vl-column",[a("vl-content-header",{attrs:{"mod-large":"","mod-show-mobile":"",background:{src:"https://source.unsplash.com/random/660x400",srcset:"https://source.unsplash.com/random/1800x500 1x, https://source.unsplash.com/random/3100x1000 2x",alt:"Content Header"}}},[a("div",{staticClass:"vl-content-header__logo-wrapper"},[a("vl-content-header-entity",{attrs:{prefix:"Vlaanderen",title:"Informatie Vlaanderen",logo:"true","mod-small":""}})],1),a("div",{staticClass:"Back",on:{click:function(t){return e.goBack()}}},[a("vl-content-header-title",{attrs:{title:"Fast and Slow","tag-name":"h1"}})],1)])],1),a("vl-column",[a("vl-button",{staticClass:"Go-Back",attrs:{"mod-secondary":"","mod-narrow":""},on:{click:function(t){return e.goBack()}}},[e._v("Back")])],1),a("vl-column",[e.errorHasOccured?[a("vl-column",[a("vl-alert",{attrs:{icon:"warning","close-text":"close warning",title:"An error has occured while handling your request, please verify!","mod-naked":"","mod-error":""}},[e._v(" "+e._s(e.errorMessage)+" ")])],1)]:e._e()],2),a("vl-column",[a("vl-infoblock",{attrs:{icon:"list-bullets",title:"Collections"}})],1),a("vl-column",{attrs:{width:"9"}},[a("vl-action-group",[a("vl-dropdown-navigation",{attrs:{label:e.selectedStream}},[a("vl-link-list",e._l(e.streams,(function(t,n){return a("vl-link-list-item",{key:t.name},[a("vl-link",{attrs:{"mod-block":"",href:"#"},on:{click:function(t){return e.changeStream(n)}}},[e._v(e._s(t.name))])],1)})),1)],1),a("vl-button",{directives:[{name:"vl-modal-toggle",rawName:"v-vl-modal-toggle",value:"editstream-modal",expression:"'editstream-modal'"}],staticClass:"edit-button",attrs:{icon:"file-edit","mod-icon-before":"","mod-narrow":""}},[e._v("Edit ")])],1)],1),a("vl-column",{attrs:{width:"3"}},[a("vl-button",{directives:[{name:"vl-modal-toggle",rawName:"v-vl-modal-toggle",value:"fragmentation-modal",expression:"'fragmentation-modal'"},{name:"vl-positioning",rawName:"v-vl-positioning:float-right",arg:"float-right"}],attrs:{icon:"add","mod-icon-before":"","mod-narrow":""}},[e._v("New fragmentation ")])],1),a("vl-column",[a("strong",[e._v("Datastream:")]),e._v(" "),a("vl-link",{attrs:{href:this.streamURL,target:"_blank"}},[e._v(e._s(decodeURI(this.streamURL)))])],1),a("vl-column",[a("vl-data-table",{attrs:{"mod-line":""}},[a("thead",[a("tr",[a("th",[e._v("Fragmentation strategy")]),a("th",[e._v("Property")]),a("th",[e._v("Endpoint")]),a("th",[e._v("Enabled")]),a("th")])]),a("tbody",e._l(e.fragmentations,(function(t,n){return a("tr",{key:t.name},[a("td",[e._v(e._s(t.strategy))]),a("td",[e._v(e._s(t.property))]),a("td",[a("vl-link",{attrs:{href:t.endpoint,target:"_blank"}},[e._v(e._s(decodeURI(t.endpoint)))])],1),t.loading?a("td",[e._v("Loading")]):a("td",[a("vl-checkbox",{attrs:{id:"checkbox-"+t,name:"checkbox-name-"+t,val:t.enabled,"mod-switch":""},on:{input:function(a){return e.enableFragmentation(t.enabled,t.name)}},model:{value:t.enabled,callback:function(a){e.$set(t,"enabled",a)},expression:"fragmentation.enabled"}})],1),a("td",[a("vl-button",{attrs:{"mod-narrow":""},on:{click:function(t){return e.deleteFragmentation(n)}}},[e._v("Delete")])],1)])})),0)])],1),a("vl-column",[a("EditStreamModal",{on:{getAllStreams:e.getAllStreams}})],1),a("vl-column",[a("FragmentationModal",{on:{getFragmentations:e.getFragmentations}})],1),a("vl-column",[a("ConfirmModal")],1)],1)],1)},r=[],o=(a("99af"),a("4160"),a("a434"),a("b0c0"),a("d3b7"),a("159b"),a("ddb0"),a("96cf"),a("1da1")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vl-layout",[a("vl-grid",{attrs:{"mod-stacked":""}},[a("vl-column",[a("vl-modal",{attrs:{id:"editstream-modal"}},[a("vl-form-grid",[a("vl-form-validation-observer",{attrs:{slim:""},scopedSlots:e._u([{key:"default",fn:function(t){t.handleSubmit,t.errors;var n=t.invalid;return[a("vl-column",[a("vl-form-message-label",{attrs:{for:"input-field-stream-name"}},[e._v(" Do you want to rename the event stream? ")]),a("vl-form-validation",{attrs:{rules:"required",name:"New event strean name"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,r=t.classes;return[n?a("vl-form-message-error",[e._v(e._s(n[0]))]):e._e(),a("vl-input-field",{class:r,attrs:{id:"input-field-stream-name",name:"input-field-stream-name","mod-block":""},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})]}}],null,!0)}),a("vl-form-message-annotation",[e._v(" This will change the name for every fragmentation. The old URI will still work. ")])],1),a("vl-column",[a("vl-action-group",{attrs:{"mod-space-between":""}},[a("vl-action-group",[a("vl-button",{directives:[{name:"vl-modal-toggle",rawName:"v-vl-modal-toggle",value:"confirm-modal",expression:"'confirm-modal'"}],attrs:{"mod-tertiary":"","mod-narrow":""}},[e._v("Delete")])],1),a("vl-action-group",{attrs:{"mod-align-right":""}},[a("vl-button",{directives:[{name:"vl-modal-toggle",rawName:"v-vl-modal-toggle",value:"editstream-modal",expression:"'editstream-modal'"}],attrs:{"mod-secondary":""},on:{click:e.emptyFields}},[e._v("Cancel")]),a("vl-button",n?{directives:[{name:"vl-modal-toggle",rawName:"v-vl-modal-toggle",value:"editstream-modal",expression:"'editstream-modal'"}],attrs:{"mod-disabled":""}}:{directives:[{name:"vl-modal-toggle",rawName:"v-vl-modal-toggle",value:"editstream-modal",expression:"'editstream-modal'"}],on:{click:e.updateStreamName}},[e._v("Save")])],1)],1)],1)]}}])})],1)],1)],1)],1)],1)},s=[],i={name:"EditStreamModal",components:{},data:function(){var e="";return{newName:e}},methods:{updateStreamName:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/streams/".concat(this.$route.query.eventStreamName));case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,!a){e.next=19;break}return e.next=9,fetch("http://localhost:3000/streams",{method:"post",body:JSON.stringify({name:this.newName,url:a.sourceURI}),headers:{"Content-Type":"application/json"}});case 9:return n=e.sent,e.next=12,n.json();case 12:return e.sent,r="/streams?eventStreamName="+this.newName,e.next=16,this.$router.push(r);case 16:window.location.reload(),e.next=20;break;case 19:console.log("An error occurred when adding the data stream");case 20:this.emptyFields();case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),emptyFields:function(){this.newName=""}}},m=i,c=a("2877"),d=Object(c["a"])(m,l,s,!1,null,"d1540ccc",null),u=d.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vl-layout",[a("vl-grid",{attrs:{"mod-stacked":""}},[a("vl-column",[a("vl-modal",{attrs:{id:"fragmentation-modal"}},[a("vl-form-grid",[a("vl-form-validation-observer",{attrs:{slim:""},scopedSlots:e._u([{key:"default",fn:function(t){t.handleSubmit,t.errors;var n=t.invalid;return[a("vl-column",[a("vl-title",{attrs:{"tag-name":"h2"}},[e._v("New Fragmentation")]),a("vl-form-message-label",{attrs:{for:"input-field-stream-name"}},[e._v(" What name do you want to give the Fragmentation? ")]),a("br"),a("span",[e._v(e._s(e.domainName)+"/")]),a("vl-form-validation",{attrs:{rules:"required",name:"fragmentation name"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,r=t.classes;return[n?a("vl-form-message-error",[e._v(e._s(n[0]))]):e._e(),a("vl-input-field",{class:r,attrs:{id:"input-field-fragmentation-name",name:"input-field-fragmentation-name"},model:{value:e.fragmentationName,callback:function(t){e.fragmentationName=t},expression:"fragmentationName"}})]}}],null,!0)})],1),a("vl-column",[a("vl-form-message-label",[e._v("Fragmentation strategy")]),a("vl-form-validation",{attrs:{rules:"required",name:"fragmentation strategy"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,r=t.classes;return[n?a("vl-form-message-error",[e._v(e._s(n[0]))]):e._e(),e._l(e.strategies,(function(t,n){return a("vl-radio-tile",{key:t.text,class:r,attrs:{name:"radio-tile-name-strategy"+n,value:t.value,id:"vl-radio-tile-strategy"+n,title:t.text},model:{value:e.selectedStrategy,callback:function(t){e.selectedStrategy=t},expression:"selectedStrategy"}})}))]}}],null,!0)})],1),a("vl-column",[a("vl-form-message-label",[e._v("Property")]),a("vl-form-validation",{attrs:{rules:"required",name:"fragmentation property"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,r=t.classes;return[n?a("vl-form-message-error",[e._v(e._s(n[0]))]):e._e(),e._l(e.properties,(function(t,n){return a("vl-radio-tile",{key:t.text,class:r,attrs:{name:"radio-tile-name-property"+n,value:{uri:t.value[t.value.length-1],name:t.text},id:"vl-radio-tile-property"+n,title:t.text},model:{value:e.selectedProperty,callback:function(t){e.selectedProperty=t},expression:"selectedProperty"}})}))]}}],null,!0)})],1),a("vl-column",[a("vl-action-group",{attrs:{"mod-align-right":""}},[a("vl-button",{directives:[{name:"vl-modal-toggle",rawName:"v-vl-modal-toggle",value:"fragmentation-modal",expression:"'fragmentation-modal'"}],attrs:{"mod-secondary":""},on:{click:e.emptyFields}},[e._v("Cancel")]),[a("vl-button",n?{directives:[{name:"vl-modal-toggle",rawName:"v-vl-modal-toggle",value:"fragmentation-modal",expression:"'fragmentation-modal'"}],attrs:{"mod-disabled":""}}:{directives:[{name:"vl-modal-toggle",rawName:"v-vl-modal-toggle",value:"fragmentation-modal",expression:"'fragmentation-modal'"}],on:{click:e.addFragmentation}},[e._v("Add")])]],2)],1)]}}])})],1)],1)],1)],1)],1)},g=[],f={name:"FragmentationModal",data:function(){var e,t,a,n="",r=[],o=[{text:"PREFIX",value:"PREFIX"},{text:"SUFFIX",value:"SUFFIX"},{text:"NGRAM - minLength: 2, maxLength: 4",value:"NGRAM"},{text:"TIME_INTERVAL - interval: 20 min",value:"TIME_INTERVAL"},{text:"XYZ_TILE - minZoom: 13, maxZoom: 15",value:"XYZ_TILE"},{text:"IDENTITY",value:"IDENTITY"}];return{domainName:n,fragmentationName:e,properties:r,strategies:o,selectedProperty:t,selectedStrategy:a}},mounted:function(){this.loadProperties(this.$route.query.eventStreamName),this.domainName="http://localhost:3000"},methods:{loadProperties:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/streams/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,console.log(n),n.properties.forEach((function(e){r.properties.push({text:e.text,value:e.value})}));case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),addFragmentation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/streams/".concat(this.$route.query.eventStreamName,"/fragmentations"),{method:"post",body:JSON.stringify({name:this.fragmentationName,strategy:this.selectedStrategy,property:this.selectedProperty.uri,propertyLabel:this.selectedProperty.name}),headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,console.log(a),"success"===!a.status?console.log("An error occurred when adding the fragmentation"):this.emptyFields(),e.next=10,this.$emit("getFragmentations",this.$route.query.eventStreamName);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),emptyFields:function(){this.fragmentationName="",this.selectedProperty="",this.selectedStrategy=""}}},h=f,p=Object(c["a"])(h,v,g,!1,null,"9c323fca",null),y=p.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vl-layout",[a("vl-grid",{attrs:{"mod-stacked":""}},[a("vl-column",[a("vl-modal",{attrs:{id:"confirm-modal"}},[a("vl-form-grid",[a("vl-column",[a("vl-form-message-label",[e._v(" Do you really want to remove the event stream? ")])],1),a("vl-column",[a("vl-action-group",{attrs:{"mod-align-right":""}},[a("vl-button",{directives:[{name:"vl-modal-toggle",rawName:"v-vl-modal-toggle",value:"confirm-modal",expression:"'confirm-modal'"}]},[e._v("No")]),a("vl-button",{directives:[{name:"vl-modal-toggle",rawName:"v-vl-modal-toggle",value:"confirm-modal",expression:"'confirm-modal'"}],attrs:{"mod-secondary":""}},[e._v("Yes")])],1)],1)],1)],1)],1)],1)],1)},_=[],x={name:"ConfirmModal",methods:{}},w=x,k=Object(c["a"])(w,b,_,!1,null,"0fb7dbc0",null),N=k.exports,S={name:"Datastream",components:{EditStreamModal:u,FragmentationModal:y,ConfirmModal:N},data:function(){return{streams:[],fragmentations:[],selectedStream:"",errorHasOccured:!1,errorMessage:"",fragInterval:null,streamURL:""}},created:function(){var e=this;this.streamURL=encodeURI("".concat("http://localhost:3000","/data/").concat(this.$route.query.eventStreamName)),this.getAllStreams(decodeURIComponent(this.$route.query.eventStreamName)),this.getFragmentations(decodeURIComponent(this.$route.query.eventStreamName)),this.fragInterval=setInterval((function(){return e.getFragmentations(decodeURIComponent(e.$route.query.eventStreamName))}),15e3)},beforeDestroy:function(){clearInterval(this.fragInterval)},methods:{deleteFragmentation:function(e){this.fragmentations.splice(e,1)},changeStream:function(e){this.selectedStream=this.streams[e].name;var t="/streams?eventStreamName="+this.streams[e].name;this.$router.push(t)},goBack:function(){return this.$router.push("/")},getFragmentations:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://localhost:3000","/streams/").concat(encodeURIComponent(t),"/fragmentations"));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,console.log(n),this.fragmentations=[],n.forEach((function(e){var a="".concat("http://localhost:3000","/data/").concat(encodeURIComponent(t),"/").concat(encodeURIComponent(e.name));"failure"===e.status&&(r.errorHasOccured=!0,r.errorMessage=e.msg),r.fragmentations.push({endpoint:a,strategy:e.kind,name:e.name,property:e.params.propertyLabel,enabled:"ENABLED"===e.status,loading:"LOADING"===e.status})}));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),enableFragmentation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t,a),e.next=3,fetch("".concat("http://localhost:3000","/streams/").concat(encodeURIComponent(this.$route.query.eventStreamName),"/fragmentations/").concat(encodeURIComponent(a),"/enable"),{method:"post",body:JSON.stringify({enabled:String(t)}),headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,console.log(r),"success"===!r.status&&console.log("An error occurred changing the status of the fragmentation"),e.next=11,this.getFragmentations(decodeURIComponent(this.$route.query.eventStreamName));case 11:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),getAllStreams:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://localhost:3000","/streams"));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,this.streams=[],e.t0=regeneratorRuntime.keys(n);case 8:if((e.t1=e.t0()).done){e.next=19;break}if(r=e.t1.value,"failure"!==n[r].status){e.next=14;break}return this.errorHasOccured=!0,this.errorMessage=n[r].msg,e.abrupt("break",19);case 14:o={name:n[r].name,url:n[r].sourceURI},this.streams.push(o),o.name===t&&(this.selectedStream=o.name),e.next=8;break;case 19:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),toggleInput:function(e){this.$refs[e][0].$vnode.elm.disabled=!1}}},R=S,I=(a("2321"),Object(c["a"])(R,n,r,!1,null,null,null));t["default"]=I.exports},"9ea7":function(e,t,a){},a434:function(e,t,a){"use strict";var n=a("23e7"),r=a("23cb"),o=a("a691"),l=a("50c4"),s=a("7b0b"),i=a("65f0"),m=a("8418"),c=a("1dde"),d=a("ae40"),u=c("splice"),v=d("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,f=Math.min,h=9007199254740991,p="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!u||!v},{splice:function(e,t){var a,n,c,d,u,v,y=s(this),b=l(y.length),_=r(e,b),x=arguments.length;if(0===x?a=n=0:1===x?(a=0,n=b-_):(a=x-2,n=f(g(o(t),0),b-_)),b+a-n>h)throw TypeError(p);for(c=i(y,n),d=0;d<n;d++)u=_+d,u in y&&m(c,d,y[u]);if(c.length=n,a<n){for(d=_;d<b-n;d++)u=d+n,v=d+a,u in y?y[v]=y[u]:delete y[v];for(d=b;d>b-n+a;d--)delete y[d-1]}else if(a>n)for(d=b-n;d>_;d--)u=d+n-1,v=d+a-1,u in y?y[v]=y[u]:delete y[v];for(d=0;d<a;d++)y[d+_]=arguments[d+2];return y.length=b-n+a,c}})}}]);
//# sourceMappingURL=chunk-46c3d8d2.39eae13c.js.map